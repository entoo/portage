diff -ur milkytracker-0.90.80.orig/src/compression/Makefile.am milkytracker-0.90.80/src/compression/Makefile.am
--- milkytracker-0.90.80.orig/src/compression/Makefile.am	2008-01-25 00:44:27.000000000 +0200
+++ milkytracker-0.90.80/src/compression/Makefile.am	2009-07-22 09:52:08.000000000 +0300
@@ -1,5 +1,6 @@
+#zziplib has been customized, so we can't use system copy.
 noinst_LIBRARIES = libcompression.a
-libcompression_a_SOURCES = zlib/generic/adler32.cpp zlib/generic/compress.cpp zlib/generic/deflate.cpp zlib/generic/infback.cpp zlib/generic/inffast.cpp zlib/generic/inflate.cpp zlib/generic/inftrees.cpp zlib/generic/uncompr.cpp zlib/generic/crc32.cpp zlib/generic/trees.cpp zlib/generic/zutil.cpp zziplib/generic/dir.cpp zziplib/generic/err.cpp zziplib/generic/fetch.cpp zziplib/generic/file.cpp zziplib/generic/fseeko.cpp zziplib/generic/info.cpp zziplib/generic/plugin.cpp zziplib/generic/stat.cpp zziplib/generic/zip.cpp zziplib/MyIO.cpp PP20.cpp ZipExtractor.cpp
-noinst_HEADERS = zlib/generic/crc32.h zlib/generic/deflate.h zlib/generic/inffast.h zlib/generic/inffixed.h zlib/generic/inflate.h zlib/generic/inftrees.h zlib/generic/trees.h zlib/generic/zconf.h zlib/generic/zlib.h zlib/generic/zutil.h zziplib/generic/zzip.h zziplib/generic/zzip___debug.h zziplib/generic/zzip___dirent.h zziplib/generic/zzip___fnmatch.h zziplib/generic/zzip___hints.h zziplib/generic/zzip___mmap.h zziplib/generic/zzip__config.h zziplib/generic/zzip__msvc.h zziplib/generic/zzip_autoconf.h zziplib/generic/zzip_conf.h zziplib/generic/zzip_fetch.h zziplib/generic/zzip_file.h zziplib/generic/zzip_format.h zziplib/generic/zzip_fseeko.h zziplib/generic/zzip_info.h zziplib/generic/zzip_lib.h zziplib/generic/zzip_plugin.h zziplib/generic/zzip_stdint.h zziplib/generic/zzip_types.h zziplib/MyIO.h PP20.h ZipExtractor.h
-INCLUDES = -I$(top_srcdir)/src/milkyplay -I$(top_srcdir)/src/ppui -I$(top_srcdir)/src/ppui/osinterface/posix/ -I$(top_srcdir)/src/compression/zziplib -I$(top_srcdir)/src/compression/zziplib/generic -I$(top_srcdir)/src/compression/zlib/generic
+libcompression_a_SOURCES = zziplib/generic/dir.cpp zziplib/generic/err.cpp zziplib/generic/fetch.cpp zziplib/generic/file.cpp zziplib/generic/fseeko.cpp zziplib/generic/info.cpp zziplib/generic/plugin.cpp zziplib/generic/stat.cpp zziplib/generic/zip.cpp zziplib/MyIO.cpp PP20.cpp ZipExtractor.cpp
+noinst_HEADERS = zziplib/generic/zzip.h zziplib/generic/zzip___debug.h zziplib/generic/zzip___dirent.h zziplib/generic/zzip___fnmatch.h zziplib/generic/zzip___hints.h zziplib/generic/zzip___mmap.h zziplib/generic/zzip__config.h zziplib/generic/zzip__msvc.h zziplib/generic/zzip_autoconf.h zziplib/generic/zzip_conf.h zziplib/generic/zzip_fetch.h zziplib/generic/zzip_file.h zziplib/generic/zzip_format.h zziplib/generic/zzip_fseeko.h zziplib/generic/zzip_info.h zziplib/generic/zzip_lib.h zziplib/generic/zzip_plugin.h zziplib/generic/zzip_stdint.h zziplib/generic/zzip_types.h zziplib/MyIO.h PP20.h ZipExtractor.h
+INCLUDES = -I$(top_srcdir)/src/milkyplay -I$(top_srcdir)/src/ppui -I$(top_srcdir)/src/ppui/osinterface/posix/ -I$(top_srcdir)/src/compression/zziplib -I$(top_srcdir)/src/compression/zziplib/generic
 #INCLUDES = -I../ppui -I../ppui/osinterface -I../ppui/osinterface/posix
diff -ur milkytracker-0.90.80.orig/src/tracker/Makefile.am milkytracker-0.90.80/src/tracker/Makefile.am
--- milkytracker-0.90.80.orig/src/tracker/Makefile.am	2008-04-13 01:45:11.000000000 +0300
+++ milkytracker-0.90.80/src/tracker/Makefile.am	2009-07-22 09:19:24.000000000 +0300
@@ -7,5 +7,5 @@
 	-I$(top_srcdir)/src/tracker -I$(top_srcdir)/src/midi/posix -I../midi/rtmidi \
 	-I$(top_srcdir)/src/ppui/osinterface -I$(top_srcdir)/src/ppui/osinterface/sdl \
 	-I$(top_srcdir)/src/ppui/osinterface/posix -I$(top_srcdir)/src/ppui/sdl -Isdl
-milkytracker_LDADD = $(top_builddir)/src/milkyplay/libmilkyplay.a $(top_builddir)/src/ppui/osinterface/libosinterface.a $(top_builddir)/src/ppui/libppui.a $(top_builddir)/src/ppui/osinterface/libosinterface.a $(top_builddir)/src/fx/libfx.a $(top_builddir)/src/compression/libcompression.a $(RTMIDI) $(SDL_LIBS)
-DIST_EXTRA = carbon/Carbon_Definitions.h carbon/Carbon_main.cpp carbon/InfoPlist.strings carbon/KeyTranslation.cpp carbon/KeyTranslation.h carbon/PreferencesDialog.cpp carbon/PreferencesDialog.h carbon/iGetKeys.cpp carbon/iGetKeys.h win32/PreferencesDialog.cpp win32/PreferencesDialog.h win32/ThreadTimer.cpp win32/ThreadTimer.h win32/Win32_main.cpp win32/Win32_resource.h win32/Win32_resources.rc wince/ButtonMapper.cpp wince/ButtonMapper.h wince/VirtualKeyToScanCodeTable.cpp wince/VirtualKeyToScanCodeTable.h wince/WaitStateThread.cpp wince/WaitStateThread.h wince/WinCE_NEWRES.H wince/WinCE_ThreadTimer.cpp wince/WinCE_ThreadTimer.h wince/WinCE_main.cpp wince/WinCE_main.h wince/WinCE_resource.h
\ No newline at end of file
+milkytracker_LDADD = $(top_builddir)/src/milkyplay/libmilkyplay.a $(top_builddir)/src/ppui/osinterface/libosinterface.a $(top_builddir)/src/ppui/libppui.a $(top_builddir)/src/ppui/osinterface/libosinterface.a $(top_builddir)/src/fx/libfx.a $(top_builddir)/src/compression/libcompression.a $(RTMIDI) $(SDL_LIBS) -lz
+DIST_EXTRA = carbon/Carbon_Definitions.h carbon/Carbon_main.cpp carbon/InfoPlist.strings carbon/KeyTranslation.cpp carbon/KeyTranslation.h carbon/PreferencesDialog.cpp carbon/PreferencesDialog.h carbon/iGetKeys.cpp carbon/iGetKeys.h win32/PreferencesDialog.cpp win32/PreferencesDialog.h win32/ThreadTimer.cpp win32/ThreadTimer.h win32/Win32_main.cpp win32/Win32_resource.h win32/Win32_resources.rc wince/ButtonMapper.cpp wince/ButtonMapper.h wince/VirtualKeyToScanCodeTable.cpp wince/VirtualKeyToScanCodeTable.h wince/WaitStateThread.cpp wince/WaitStateThread.h wince/WinCE_NEWRES.H wince/WinCE_ThreadTimer.cpp wince/WinCE_ThreadTimer.h wince/WinCE_main.cpp wince/WinCE_main.h wince/WinCE_resource.h
